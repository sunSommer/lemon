"use strict";require.config({baseUrl:"../js/",paths:{mui:"libs/mui.min",dtPicker:"libs/mui.picker.min",popPicker:"libs/mui.poppicker"},shim:{dtPicker:{deps:["mui"]},popPicker:{deps:["mui"]}}}),require(["mui","dtPicker"],function(a,t){console.log(a);var o=window.localStorage.getItem("uid"),e=document.querySelectorAll(".tab-list ul li"),l=(document.querySelectorAll(".tabMain"),document.querySelector(".main-lists")),c=(document.querySelectorAll(".counter ul li span"),document.querySelector(".txt")),n=(document.querySelector(".del"),document.querySelector(".ok")),i=(new Date).getFullYear(),r=(new Date).getMonth()+1,s=(new Date).getDay();document.querySelector(".date").innerHTML=i+"-"+(10<r?r:"0"+r)+"-"+(10<s?s:"0"+s);function u(t){a.ajax("/api/getClass",{data:{uid:o,income:t},dataType:"json",type:"post",timeout:1e4,success:function(t){var e,n,i;e=t.data,n="",e.forEach(function(t){n+='<dd>\n\t\t\t\t\t<p><span class="'+t.icon+'""></span></p>\n\t\t\t\t\t<p>'+t.style+"</p>\n\t\t\t\t</dd>"}),l.innerHTML=n+'<dd class="add">\n\t\t\t\t<p><span class="mui-icon mui-icon-plus"></span></p>\n\t\t\t\t<p>自定义</p>\n\t\t\t</dd>',i=document.querySelectorAll(".main-lists dd"),a(".main-lists").on("tap","dd",function(){for(var t=0;t<i.length;t++)i[t].firstElementChild.classList.remove("tab-active");this.firstElementChild.classList.add("tab-active")}),document.querySelector(".add").addEventListener("tap",function(){var t=document.querySelector(".tab-list ul .active").innerHTML;window.localStorage.setItem("style",t),window.location.href="addClass.html"})},error:function(t,e,n){}})}document.querySelector(".back").addEventListener("tap",function(){window.location.href="../../index.html"}),u("支出"),a(".tab-list ul").on("tap","li",function(){for(var t=0;t<e.length;t++)e[t].classList.remove("active");this.classList.add("active"),u(this.innerHTML)}),a(".counter ul li").on("tap","span",function(){"X"==(_this=this).innerHTML?(c.value=1==c.value.length?"0.00":c.value.substr(0,c.value.length-1),console.log(c.value)):"0.00"==c.value?c.value=this.innerHTML:c.value+=this.innerHTML}),n.addEventListener("tap",function(){var t=document.querySelector(".tab-active span").className,e=document.querySelector(".tab-list .active").innerHTML,n=document.querySelector(".tab-active").nextElementSibling.innerText,i=document.querySelector(".date").innerHTML;console.log(i),a.ajax("/api/addBill",{data:{uid:o,icon:t,style:n,income:e,timer:i,price:1*c.value},dataType:"json",type:"post",timeout:1e4,success:function(t){a.alert(t.msg,"提示","确定",function(){window.location.href="../../index.html"})},error:function(t,e,n){}})}),t=new a.DtPicker({type:"date"}),document.querySelector(".date").addEventListener("tap",function(){_this=this,t.show(function(t){_this.innerHTML=t.y.text+"-"+t.m.text+"-"+t.d.text})})});